{% extends 'core/base.html' %}

{% load static %}

{% block navbar %}
  <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
    <div class="navbar-nav">
      <a class="nav-item nav-link ml-5 selected" href="#">Dashboard</a>
      <a class="nav-item nav-link" href="{% url 'music:my_music' %}">MÃºsicas</a>
    </div>
  </div>
{% endblock navbar %}

{% block css %}
  {{ block.super }}

  <link href="{% static 'dashboard/css/feed.css' %}" rel="stylesheet">

{% endblock css %}

{% block js %}
  {{ block.super }}

  <script type="text/javascript" src="{% static 'dashboard/js/feed.js' %}"></script>

{%  endblock js %}

{% block content %}

    <div class="row">

      <div class="col">

        <!-- left panel -->

      </div>


      <div class="col-6">

        <!-- feed section -->

        {% for content_piece in content  %}

          <div class="row my-2">
            <div class="col">
              <div class="card my-1 content-card">
                <div class="card-header pt-1 pb-0 content-card-header">

                  <div class="row">
                    <div class="col-auto pt-1">
                      <img src="{{ content_piece.author_img }}" class="img-circle small-profile-img">
                    </div>
                    <div class="col">
                      <p class="font-weight-bold row my-0"> {{ content_piece.author }} </p>
                      <p class="font-weight-light font-italic row my-0">{{ content_piece.date_time }}</p>
                    </div>
                  </div>

                </div>

                <div class="card-body content-card-body">

                  <div class="row px-2">
                  <p class="card-text">{{ content_piece.menssage }}</p>
                  </div>

                  {% if content_piece.content_type is view.CONTENT_PLAYLIST %}
                    <div class="panel panel-primary">
                      <div class="panel-body">
                        <ul class="list-group">
                          {% for music_playlist in content_piece.playlist %}
                            <li class="list-group-item">
                              <div class="row px-2 pt-1 align-items-center music-item">
                                <a class="album-img col-2" href="" onclick=abc(this) class="slider_info">
                                  <i class="fas fa-play fa-2x small-play-button"></i>
                                  <img class="img-fluid img-thumbnail img-playlist" src={{music_playlist.music_image_link}}>
                                </a>
                                <div class="album-info col-8 border-bottom">
                                  {{music_playlist.music_name}}
                                  <p class="font-weight-light font-italic">
                                    {{music_playlist.music_author}} - {{music_playlist.music_album}}
                                  </p>
                                </div>
                                <div class="col-2">
                                  <button class="fas fa-plus plus-button fa-2x"></button>
                                  <button class="fas fa-info-circle info-button fa-2x"></button>
                                </div>
                              </div>
                            </li>
                          {% endfor %}
                        </ul>
                      </div>
                    </div>
                  {% endif %}

                  {% if content_piece.content_type is view.CONTENT_MUSIC %}
                    <div class="panel-body">
                      <li class="list-group-item">
                        <div class="row px-2 pt-1 align-items-center music-item">
                            <a class="album-img col" href="" onclick=abc(this) class="slider_info">
                              <i class="fas fa-play fa-3x play-button"></i>
                              <img class="img-fluid img-thumbnail" src={{content_piece.music.music_image_link}}>
                            </a>

                            <div class=" col">
                              {{content_piece.music.music_name}}
                              <br>
                              <p class="font-weight-light font-italic border-bottom album-info">
                                {{content_piece.music.music_author}} - {{content_piece.music.music_album}}
                              </p>
                              <div class="row justify-content-end">
                                <div class="col-auto">
                                  <button class="fas fa-plus plus-button fa-2x"></button>
                                  <button class="fas fa-info-circle info-button fa-2x"></button>
                                </div>
                              </div>
                            </div>

                        </div>
                      </li>
                    </div>
                  {% endif %}

                </div>

                <div class="card-footer text-muted content-card-footer">
                  <div class="row align-items-center">

                    <div class="col px-1">
                      <div class="input-group">
                        <input type="text" class="form-control">
                        <div class="input-group-append">
                          <button class="btn btn-outline-secondary" type="button" id="button-post-comment"><i class="fas fa-comments black-icon"></i></button>
                        </div>
                      </div>
                    </div>
                    <div>
                      <button class="btn btn-outline-secondary" type="button" id="like" onclick="myFunction(this, {{content_piece.number_likes}})"><i id="heart"  class="far fa-heart red-icon col-auto px-1"></i><span id="number_likes">{{content_piece.number_likes}}</span></button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

        {% endfor %}

      </div>

      <div class="col">

        <!-- right panel -->


      </div>

    </div>

{% endblock content %}
